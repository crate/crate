apply plugin: 'java'
apply plugin: 'maven'

repositories {
    mavenCentral()
}

tasks.withType(JavaCompile) {
    options.compilerArgs << '-XDignore.symbol.file'
    options.fork = true // may not needed on 1.8
    options.forkOptions.executable = 'javac' // may not needed on 1.8
}

// generated in upstream directory with:
// mvn dependency:tree | grep -o ' .- .*:compile' | cut -d ' ' -f 3 | sort | gsed "s/\(.*\):jar:\(.*\):compile/compile '\1:\2'/g"
dependencies {

    compile 'com.amazonaws:aws-java-sdk-core:1.10.33'
    compile 'com.amazonaws:aws-java-sdk-ec2:1.10.33'
    compile 'com.amazonaws:aws-java-sdk-kms:1.10.33'
    compile 'com.amazonaws:aws-java-sdk-s3:1.10.33'
    compile 'com.carrotsearch:hppc:0.7.1'
    compile 'com.fasterxml.jackson.core:jackson-annotations:2.5.0'
    compile 'com.fasterxml.jackson.core:jackson-core:2.5.0'
    compile 'com.fasterxml.jackson.core:jackson-databind:2.5.3'
    compile 'com.fasterxml.jackson.dataformat:jackson-dataformat-cbor:2.6.2'
    compile 'com.fasterxml.jackson.dataformat:jackson-dataformat-smile:2.6.2'
    compile 'com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.6.2'
    compile('com.github.spullara.mustache.java:compiler:0.8.13') {
        exclude group: 'com.google.guava', module: 'guava'
    }
    compile 'com.google.api-client:google-api-client:1.20.0'
    compile 'com.google.apis:google-api-services-compute:v1-rev71-1.20.0'
    compile 'com.google.guava:guava:18.0'
    compile 'com.google.http-client:google-http-client-jackson2:1.20.0'
    compile 'com.google.http-client:google-http-client:1.20.0'
    compile 'com.google.oauth-client:google-oauth-client:1.20.0'
    compile 'com.googlecode.juniversalchardet:juniversalchardet:1.0.3'
    compile 'com.ibm.icu:icu4j:54.1'
    compile 'com.microsoft.azure:azure-core:0.7.0'
    compile 'com.microsoft.azure:azure-management-compute:0.7.0'
    compile 'com.microsoft.azure:azure-management:0.7.0'
    compile 'com.microsoft.azure:azure-storage:2.0.0'
    compile 'com.microsoft.azure:azure-svc-mgmt-compute:0.9.0'
    compile 'com.ning:compress-lzf:1.0.2'
    compile 'com.spatial4j:spatial4j:0.5'
    compile 'com.sun.jersey:jersey-client:1.13'
    compile 'com.sun.jersey:jersey-core:1.13'
    compile 'com.sun.jersey:jersey-json:1.13'
    compile 'com.sun.xml.bind:jaxb-impl:2.2.3-1'
    compile 'com.tdunning:t-digest:3.0'
    compile 'com.twitter:jsr166e:1.1.0'
    compile 'com.vividsolutions:jts:1.13'
    compile 'commons-cli:commons-cli:1.3.1'
    compile 'commons-io:commons-io:2.4'
    compile 'commons-lang:commons-lang:2.6'
    compile 'io.netty:netty:3.10.5.Final'
    compile 'javax.activation:activation:1.1'
    compile 'javax.inject:javax.inject:1'
    compile 'javax.mail:mail:1.4.5'
    compile 'javax.xml.bind:jaxb-api:2.2.2'
    compile 'javax.xml.stream:stax-api:1.0-2'
    compile 'joda-time:joda-time:2.8.2'
    compile 'log4j:apache-log4j-extras:1.2.17'
    compile 'log4j:log4j:1.2.17'
    compile 'net.java.dev.jna:jna:4.1.0'
    compile 'org.antlr:antlr-runtime:3.5'
    compile 'org.apache.commons:commons-lang3:3.3.2'
    compile 'org.apache.pdfbox:pdfbox:1.8.10'
    compile 'org.apache.poi:poi-ooxml-schemas:3.13'
    compile 'org.apache.poi:poi-ooxml:3.13'
    compile 'org.apache.poi:poi-scratchpad:3.13'
    compile 'org.apache.poi:poi:3.13'
    compile 'org.apache.tika:tika-core:1.11'
    compile 'org.apache.tika:tika-parsers:1.11'
    compile 'org.apache.xmlbeans:xmlbeans:2.6.0'
    compile 'org.bouncycastle:bcmail-jdk15on:1.52'
    compile 'org.bouncycastle:bcpkix-jdk15on:1.52'
    compile 'org.bouncycastle:bcprov-jdk15on:1.52'
    compile 'org.ccil.cowan.tagsoup:tagsoup:1.2.1'
    compile 'org.codehaus.groovy:groovy-all:2.4.4:indy'
    compile 'org.codehaus.jackson:jackson-core-asl:1.9.2'
    compile 'org.codehaus.jackson:jackson-jaxrs:1.9.2'
    compile 'org.codehaus.jackson:jackson-mapper-asl:1.9.2'
    compile 'org.codehaus.jackson:jackson-xc:1.9.2'
    compile 'org.codehaus.jettison:jettison:1.1'
    compile 'org.elasticsearch:securesm:1.0'
    compile 'org.hamcrest:hamcrest-all:1.3'
    compile 'org.hdrhistogram:HdrHistogram:2.1.6'
    compile 'org.joda:joda-convert:1.2'
    compile 'org.mozilla:rhino:1.7R4'
    compile 'org.ow2.asm:asm-commons:4.1'
    compile 'org.ow2.asm:asm:4.1'
    compile 'org.python:jython-standalone:2.7.0'
    compile 'org.slf4j:slf4j-api:1.6.2'
    compile 'org.yaml:snakeyaml:1.15'
    compile 'stax:stax-api:1.0.1'

    // if you update the versions here
    // also update the dependencies in client/build.gradle
    compile 'org.apache.lucene:lucene-analyzers-common:5.3.1'
    compile 'org.apache.lucene:lucene-analyzers-icu:5.3.1'
    compile 'org.apache.lucene:lucene-analyzers-kuromoji:5.3.1'
    compile 'org.apache.lucene:lucene-analyzers-phonetic:5.3.1'
    compile 'org.apache.lucene:lucene-analyzers-smartcn:5.3.1'
    compile 'org.apache.lucene:lucene-analyzers-stempel:5.3.1'
    compile 'org.apache.lucene:lucene-backward-codecs:5.3.1'
    compile 'org.apache.lucene:lucene-core:5.3.1'
    compile 'org.apache.lucene:lucene-expressions:5.3.1'
    compile 'org.apache.lucene:lucene-grouping:5.3.1'
    compile 'org.apache.lucene:lucene-highlighter:5.3.1'
    compile 'org.apache.lucene:lucene-join:5.3.1'
    compile 'org.apache.lucene:lucene-memory:5.3.1'
    compile 'org.apache.lucene:lucene-misc:5.3.1'
    compile 'org.apache.lucene:lucene-queries:5.3.1'
    compile 'org.apache.lucene:lucene-queryparser:5.3.1'
    compile 'org.apache.lucene:lucene-sandbox:5.3.1'
    compile 'org.apache.lucene:lucene-spatial3d:5.3.1'
    compile 'org.apache.lucene:lucene-spatial:5.3.1'
    compile 'org.apache.lucene:lucene-suggest:5.3.1'

    // by hand
    testCompile ('com.carrotsearch.randomizedtesting:randomizedtesting-runner:2.1.16') {
        exclude group: 'junit', module: 'junit'
    }
    testCompile 'com.google.code.findbugs:jsr305:1.3.9'
    testCompile 'commons-codec:commons-codec:1.10'
    testCompile 'commons-codec:commons-codec:1.6'
    testCompile 'commons-logging:commons-logging:1.1.3'
    testCompile 'org.apache.ant:ant:1.8.2'
    testCompile 'org.apache.httpcomponents:httpclient:4.3.6'
    testCompile 'org.apache.httpcomponents:httpcore:4.3.3'
    testCompile 'org.hamcrest:hamcrest-all:1.3'
    testCompile 'com.google.jimfs:jimfs:1.0'

    testCompile ('junit:junit:4.11') {
        exclude group: 'org.hamcrest', module: 'hamcrest-core'
    }
    testCompile ('org.apache.lucene:lucene-test-framework:5.4.0') {
        exclude group: 'junit', module: 'junit'
    }
    testCompile ('org.apache.lucene:lucene-codecs:5.4.0') {
        exclude group: 'junit', module: 'junit'
    }
    testCompile 'com.carrotsearch.randomizedtesting:junit4-ant:2.1.6'
}


test {
    enabled = false
    jacoco {
        enabled = false
    }
}

sourceSets {
    main {
        java {
            srcDir 'upstream/core/src/main/java'
        }
        resources {
            srcDir 'upstream/core/src/main/resources'
            include '**/*.*'
        }
        resources {
            srcDir 'upstream/core/src/main/java'
            include '**/*.json'
            include '**/*.yml'
        }
    }
    test {
        java {
            srcDir 'upstream/core/src/test/java'
        }
        resources {
            srcDir 'upstream/core/src/test/resources'
            include '**/*.*'
        }
        resources {
            srcDir 'upstream/core/src/test/java'
            include '**/*.json'
            include '**/*.yml'
            include '**/*.txt'
        }
    }
}
