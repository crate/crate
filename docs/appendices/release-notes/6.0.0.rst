.. _version_6.0.0:

==========================
Version 6.0.0 - Unreleased
==========================

.. comment 1. Remove the " - Unreleased" from the header above and adjust the ==
.. comment 2. Remove the NOTE below and replace with: "Released on 20XX-XX-XX."
.. comment    (without a NOTE entry, simply starting from col 1 of the line)
.. NOTE::
    In development. 6.0.0 isn't released yet. These are the release notes for
    the upcoming release.

.. NOTE::

    If you are upgrading a cluster, you must be running CrateDB 5.0.0 or higher
    before you upgrade to 6.0.0.

    We recommend that you upgrade to the latest 5.10 release before moving to
    6.0.0.

    A rolling upgrade from >= 5.10.1 to 6.0.0 is supported.
    Before upgrading, you should `back up your data`_.

.. WARNING::

    Tables that were created before CrateDB 5.x will not function with 6.x
    and must be recreated before moving to 6.x.x.

    You can recreate tables using ``COPY TO`` and ``COPY FROM`` or by
    `inserting the data into a new table`_.

.. _back up your data: https://crate.io/docs/crate/reference/en/latest/admin/snapshots.html
.. _inserting the data into a new table: https://crate.io/docs/crate/reference/en/latest/admin/system-information.html#tables-need-to-be-recreated

.. rubric:: Table of contents

.. contents::
   :local:

.. _version_6.0.0_breaking_changes:

Breaking Changes
================

- Updated Lucene from 9.12 to 10.0 which brings the following user facing changes:

  - Tables created in 4.x can't be read anymore. If you're running CrateDB 5.x
    and have any tables created in 4.x they need to be reindexed before moving
    to CrateDB 6.0. Make sure there are no warnings in the admin console and see
    :ref:`table_version_compatibility` for more information.

  - The ``dutch_kp`` and ``lovins`` token filters are no longer available. If
    users have tables which use these token filters for analysis, they will need
    to re-index with either plain ``dutch`` or ``english`` stemmers before
    upgrading.

  - The ``german2`` and ``german`` token filters now use the same underlying stemmer,
    which always expands ``ä``, ``ö`` and ``ü`` to ``ae``, ``oe`` and ``ue`` respectively.
    If users have tables which were using the ``german`` stemmer without a character
    filter that already did this, they will need to re-index after upgrading.

Deprecations
============

None


Changes
=======

SQL Statements
--------------

SQL Standard and PostgreSQL Compatibility
-----------------------------------------

- Added support for lower case format patterns to the
  :ref:`to_char <scalar-to_char>` scalar function.

Data Types
----------

- Added support for dynamic mapping of nested arrays.

Scalar and Aggregation Functions
--------------------------------

Performance and Resilience Improvements
---------------------------------------

- Improved the performance of the queries involving ``= ALL`` array operator.

Administration and Operations
-----------------------------

Client interfaces
-----------------
